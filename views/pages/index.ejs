<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <script>
          window.onload = function () {
            $.ajax({
              url: "/DockerPS",
              method: "GET",
              success: function (response) {
                $('#output').append(response)
              },
              error: function (xhr, status, error) {
                $('#output').append(xhr.responseText)
                console.error(xhr.responseText);
              },
            });
          }
    </script>
  </head>
  <body class="g-sidenav-show bg-secondary">
    <div class="min-height-300 bg-dark position-absolute w-100"></div>
    <%- include('../partials/sidebar') %>
    <main class="main-content position-relative border-radius-lg">
      <%- include('../partials/nav') %>

      <div class="container-fluid py-4">
        <div class="row bg-info m-1 mb-2">
          <div class="p-2" style="text-align: center;">
            <b style="color: white;"><%= IPADDR %></b>
          </div>
        </div>
        <h4 style="color: white;">Overview</h4>
        <div class="row mb-4">
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-body p-3">
                <div class="row">
                  <div class="col-8">
                    <div class="numbers">
                      <p class="text-sm mb-0 text-uppercase font-weight-bold">
                        Linux hosts.
                      </p>
                      <h5 class="font-weight-bolder"><%= LINUXCOUNT %></h5>
                      <p class="mb-0">
                        Ubuntu, RedHat
                      </p>
                    </div>
                  </div>
                  <div class="col-4 text-end">
                    <div
                      class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle"
                    >
                      <i
                        class="ni ni-money-coins text-lg opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
              <div class="card-body p-3">
                <div class="row">
                  <div class="col-8">
                    <div class="numbers">
                      <p class="text-sm mb-0 text-uppercase font-weight-bold">
                        Windows hosts.
                      </p>
                      <h5 class="font-weight-bolder"><%= WINSCOUNT %></h5>
                      <p class="mb-0">
                        Windows Server
                      </p>
                    </div>
                  </div>
                  <div class="col-4 text-end">
                    <div
                      class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle"
                    >
                      <i
                        class="ni ni-world text-lg opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card" onclick="reDirect('prometheus')">
              <div class="card-body p-3">
                <div class="row">
                  <div class="col-8">
                    <div class="numbers">
                      <p class="text-sm mb-0 text-uppercase font-weight-bold">
                        Prometheus
                      </p>
                      <h5 class="font-weight-bolder">Running</h5>
                      <p class="mb-0">
                        Port 9090
                      </p>
                      
                    </div>
                  </div>
                  <div class="col-4 text-end">
                    <div
                      class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle"
                    >
                      <i
                        class="ni ni-paper-diploma text-lg opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6">
            <div class="card" onclick="reDirect('grafana')">
              <div class="card-body p-3">
                <div class="row">
                  <div class="col-8">
                    <div class="numbers">
                      <p class="text-sm mb-0 text-uppercase font-weight-bold">
                        Grafana
                      </p>
                      <h5 class="font-weight-bolder">Running</h5>
                      <p class="mb-0">
                        
                        Mvision Version.
                      </p>
                    </div>
                  </div>
                  <div class="col-4 text-end">
                    <div
                      class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle"
                    >
                      <i
                        class="ni ni-cart text-lg opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <h6 class="text-white font-weight-bold">
          What do you want to monitor?
        </h6>
        <div class="row mt-4">
          <div
            class="col-md-2 col-sm-6 mb-xl-0 mb-4"
            onclick="reDirect('/linux')"
          >
            <div class="card onmoursehover">
              <div class="card-body p-3">
                <div class="row">
                  <img src="/assets/img/monitor/linux.png" alt="" />
                  <h6 class="text-center mt-2">Linux OS</h6>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-md-2 col-sm-6 mb-xl-0 mb-4"
            onclick="reDirect('/windows')"
          >
            <div class="card onmoursehover">
              <div class="card-body p-3">
                <div class="row">
                  <img src="/assets/img/monitor/windows.png" alt="" srcset="" />
                  <h6 class="text-center mt-2">Windows OS</h6>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 col-sm-6 mb-xl-0 mb-4" onclick="reDirect('/vmware')">
            <div class="card onmoursehover">
              <div class="card-body p-3">
                <div class="row">
                  <img src="/assets/img/monitor/vsphere.png" alt="" />
                  <h6 class="text-center mt-2">Vsphere</h6>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 col-sm-6 mb-xl-0 mb-4" onclick="reDirect('/isilon')">
            <div class="card onmoursehover">
              <div class="card-body p-3">
                <div class="row">
                  <img src="/assets/img/monitor/dellemc.png" alt="" srcset="" />
                  <h6 class="text-center mt-2">Dell Isilon</h6>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-2 col-sm-6 mb-xl-0 mb-4" onclick="reDirect('/isilon')">
            <div class="card onmoursehover">
              <div class="card-body p-3">
                <div class="row">
                  <img src="/assets/img/monitor/veritus.png" alt="" srcset="" />
                  <h6 class="text-center mt-2">NetBackup</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br />
        <div class="row mt-4" id="Console" tabindex="0">
          <div class="col-lg-12 mb-lg-0 mb-4">
            <div class="card">
              <div class="card-header pb-0 p-3 bg-dark">
                <h6 class="mb-2 text-light font-weight-bold">Console</h6>
              </div>
              <div class="card-body" style="background-color: black;">
               <pre class="text-info" id="output"></pre>
              </div>
            </div>
          </div>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script>
          const socket = io();
        </script>
        <script>
          function reDirect(path) {

            if(path == 'prometheus'){
              window.open('http://10.4.160.170:9090', 'name','width=1200,height=650');
            }else if(path == 'grafana'){
              window.open('https://10.4.160.170:3002', 'name','width=1200,height=650');
            }else{
              window.location.href = path;
            }
    
          }
        </script>
        <%- include('../partials/footer') %>
      </div>
    </main>
  </body>
</html>
